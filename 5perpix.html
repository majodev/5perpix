<head>
  <title>5perpix</title>
</head>

<body>
  {{> pageInformationHolder}}
  {{loginButtons}}
  {{> pictureOverviewHolder}}
  {{> messageHolder}}
  {{> pictureVisualizationHolder}}
  <footer>
    by <a href="http://www.majodev.com">majodev.com</a>
  </footer>
</body>


<template name="pageInformationHolder">
  <div class="pageInformationHolder">
    <div class="pageInformationHolderHeader">Welcome to 5perpix, initial prototype. WARNING: All data will be resetted when deploying newer versions</div>
  </div>
</template>

<!-- Messages -->

<template name="messageHolder">
  <div class="messageHolder">
    {{#if messageReference}}
      {{#if currentUser}}
        <div class="messageInformationUserLoggedIn">Messages: (signed in! allowed to post messages):</div>
        {{> messageItemAdd}}
      {{/if}}
      {{#unless currentUser}}
        <div class="messageInformationUserLoggedOut">Messages: (sign in to post your own messages):</div>
      {{/unless}}
      {{> messageDisplay}}
    {{/if}}
    {{#unless messageReference}}
      <div class="messageInformationMessagingDisabled">Placeholder messageHolder: No messageReference to show found.</div>
    {{/unless}}
  </div>
</template>

<template name="messageDisplay">
  <div class="messageDisplay">
    {{#unless messagesFound}}
        <div class="messagesNothingFound">Be the first to leave a message!</div>
    {{/unless}}
    {{#if messagesFound}}
      <div class="messages">
        {{#each messages}}
          {{> messageItem}}
        {{/each}}
      </div>
    {{/if}}
  </div>
</template>

<template name="messageItem">
  <div class="messageItem">
    <div class="message">
      <span class="PROTOTYPE_ONLY_HACK">--</span>  
      <span class="author">{{author}} [{{timestamp}}]:</span> {{text}}
  </div>
</template>

<template name="messageItemAdd">
  <div class="messageItemAdd">
    <label>Message:</label>
    <input class="messageItemAddInput" />
    <button class="messageItemAddButton">add</button>
  </div>  
</template>


<!-- Picture Visualization -->

<template name="pictureVisualizationHolder">
  {{#if selected_picture}}
    {{> pictureInformationDisplay}}
    {{> pictureVisualization}}
  {{/if}}
  {{#unless selected_picture}}
    <div class="messageInformationMessagingDisabled">Placeholder pictureVisualizationHolder: No picture to visualize found.</div>
  {{/unless}}
</template>

<template name="pictureInformationDisplay">
  <div class="pictureInformationDisplay">
    {{#if currentUser}}
      <div class="pictureInformationUserLoggedIn">Picture (signed in! let's change pixels permanently):</div>
    {{/if}}
    {{#unless currentUser}}
      <div class="pictureInformationUserLoggedOut">Picture (sign in to change pixels permanently):</div>
    {{/unless}}
  </div>
</template>

<template name="pictureVisualization">
  <div class="pictureVisualization">
    {{> pictureVisualizationItemSVG}}
  </div>
</template>

<template name="pictureVisualizationItemSVG">
  <div class="pictureVisualizationItemSVG">
    {{#constant}}
      <svg id="pictureVisualizationItemSVGContainer" width="520" height="520" >
        <g class="pictureVisualizationItemSVGPixels"></g>
      </svg>
    {{/constant}}
  </div>
</template>

<!-- Pictures Overview -->

<template name="pictureOverviewHolder">
  <div class="pictureOverviewHolder">
    {{#if picturesFound}}
      {{> pictureOverviewDisplay}}
    {{/if}}
    {{#unless picturesFound}}
      <div class="pictureOverviewHolderNoPicturesFound">Placeholder pictureOverviewHolder: No pictures for overview found.</div>
    {{/unless}}
  </div>
</template>

<template name="pictureOverviewDisplay">
  <div class="pictureOverviewDisplay">
    <div class="pictureOverviewHeader">Pictures (click to select):</div>
    <div class="pictures">
      {{#each pictures}}
        {{> picture}}
      {{/each}}
    </div>
  </div>
</template>

<template name="picture">
  <div class="picture{{selected}}">
    <span class="PROTOTYPE_ONLY_HACK">--</span>
    <span class="name">{{name}}</span>
    <span class="id">{{_id}}</span>
    <span class="width">{{width}}</span>
    <span class="height">{{height}}</span>
    <span class="rows">{{rows}}</span>
    <span class="cols">{{cols}}</span>
  </div>
</template>