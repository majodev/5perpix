<head>
  <title>5perpix</title>
</head>

<body>
  {{loginButtons}}

  {{> pictureOverviewDisplay}}

  {{> messageHolder}}

  {{> userInformationDisplay}}
  {{> pictureVisualization}}
  

  <footer>
    by <a href="http://www.majodev.com">majodev.com</a>
  </footer>
</body>

<template name="messageHolder">
  {{#if messageReference}}

    {{#if currentUser}}
      <div class="messageInformation">Logged in, allowed to post messages!</div>
      {{> messageItemAdd}}
    {{/if}}
    {{#unless currentUser}}
      <div class="messageInformation">Login to post own messages!</div>
    {{/unless}}

    {{> messageDisplay}}
    
  {{/if}}
  {{#unless messageReference}}
    <div class="messageInformation">Messages are disabled for this object!</div>
  {{/unless}}
</template>

<template name="messageDisplay">
  {{#each messages}}
    {{> messageItem}}
  {{/each}}
</template>

<template name="messageItem">
  <div class="message"><span class="author">{{author}} [{{timestamp}}]:</span> {{text}}</div>
</template>

<template name="messageItemAdd">
  <div class="messageItemAdd">
    <label>Message:</label>
    <input class="messageItemAddInput" />
    <button class="messageItemAddButton">add</button>
  </div>  
</template>

<!-- User Information -->
<template name="userInformationDisplay">
  {{#if currentUser}}
    <div class="userInformation">Logged in! Let's smash these pixarts!</div>
  {{/if}}
  {{#unless currentUser}}
    <div class="userInformation">Please login to smash these pixarts!</div>
  {{/unless}}
</template>

<!-- Picture Visualization -->

<template name="pictureVisualization">
  {{#if selected_picture}}
    {{> pictureVisualizationItemSVG}}
  {{/if}}
  {{#unless selected_picture}}
    <div class="pictureInformation">Select a picture!</div>
  {{/unless}}
</template>

<template name="pictureVisualizationItemSVG">
  <div class="pictureVisualizationItemSVG">
    {{#constant}}
      <svg id="pictureVisualizationItemSVGContainer" width="520" height="520" >
        <g class="pictureVisualizationItemSVGPixels"></g>
      </svg>
    {{/constant}}
  </div>
</template>

<!-- Pictures Overview -->

<template name="pictureOverviewDisplay">
  <div class="pictureOverviewDisplay">
    {{#each pictures}}
      {{> picture}}
    {{/each}}
  </div>
</template>

<template name="picture">
  <div class="picture{{selected}}"> 
    <span class="name">{{name}}</span>
    <span class="id">{{_id}}</span>
    <span class="width">{{width}}</span>
    <span class="height">{{height}}</span>
    <span class="rows">{{rows}}</span>
    <span class="cols">{{cols}}</span>
  </div>
</template>